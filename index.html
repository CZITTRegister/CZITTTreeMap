<!DOCTYPE html>
<html>
  
    <head>
        <title>My Interactive Map</title>
        
              
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
            integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
            crossorigin=""/>
             
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
             crossorigin="">
          </script>
                
              
          <link rel="stylesheet" href="style.css"/>
	    
	  <script src="leaflet-sidebar.js">
	</script>						    
	<link rel="stylesheet" href="leaflet-sidebar.css"/>						    
	    
	    
	    
	    
 </head>
  
  <body>
	<div id="mapid"></div>
	
	<script>
		//javascript
		let mapOptions = {
				center: [11.01, -61.1],
				zoom: 7,
			};
		const myMap = L.map("mapid", mapOptions);
		
		const Maptiles_A = L.tileLayer(
				'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
				{
				maxZoom: 19,
				attribution: '&copy; <a herf="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
			});
			
		Maptiles_A.addTo(myMap);
		
Maptiles_A.addTo(myMap).setOpacity(0.5);

let treeLayer= L.geoJSON(null,
                {onEachFeature:
										function (feature, layer) {
										//layer.bindPopup("placeholder text blah blah blah")
										layer.bindPopup(`
										<div class="tree-type"> ${feature.properties["NUMBER"]}: ${feature.properties["TREE TYPE"]}</div>
										<div class="timestamp">${feature.properties["PHOTO DATE"]}</div>
										<img class="photo" src="treeicon.png" alt="Photo of Tree">
										<div class="offset">Est.Offset: ${feature.properties["ESTIMATED"]}</div>
										<div class="beneficiary">Beneficiary: ${feature.properties["ORGANISATI"]}</div>
										<div class="planter">Planter: ${feature.properties["INDIVIDUAL"]}</div>
										<div class="risk-level">Risk: ${feature.properties["RISKLEVEL"]}</div>
										`)
                  },
              
                  pointToLayer: function(feature, latlng) {
                   let iconOptions = {
			iconUrl: "treeicon.png",
			iconSize: [32, 32],
			iconAnchor: [16, 16],
			popupAnchor: [0, -8]
		   };
			let treeIcon = L.icon(iconOptions);
			   
			   
                  return L.marker(latlng, {icon: treeIcon})
                                       
                  }
                
		});
		
		
treeLayer.addTo(myMap);
	
	
let sidebar=L.control.sidebar({
	autopan: false,
	closeButton: true,
	container: "sidebar",
	position: "right"
}).addTo(myMap);
		
let info=`<h1>Tree Catalog - The Carbon Zero Institute of Trinidad and Tobago</h1>
	<h2>Purpose:</h2>
	<p> Carbon emissions from fossil fuels, the inustrial sector and land use is the largest source of global Greenhouse Gas (GHG) emissions. 
	We must act now and do our part to combat the exacerbated effects of climate change. 
	The CZITT 1000 trees challenge initiative partners with schools, clubs and corporations to plant and record trees which are then geotagged.
	Our goal is to establish a carbon offset registry in which its efforts are driven towards reducing carbon emissions via carbon sequestration as a proven climate change mitigation strategy.</p>
	
	
	
	
	
	
	<h2>Contributors:</h2>
	<p>Ryan Seemungal, Data Visualiation Specialist</p>
	<p>Brandon Serrao, Cartography Instructor</p>
	<p>Sweelan Renaud, Program Assistant at Advisors Next Door</p>
	<p>Aashrita Mohess, Intern at Advisors Next Door </p>
	
	<h4> Contact:</4>
	<p> Contact us at <a href="mailto:advisorsnextdoor@gmail.com"target="_blank">advisorsnextdoor@gmail.com</a> for more information</p>
	
	<p>Visit <a href= "https://czitt-ed.org/"target="_blank">Caribbean E-Learning by the Carbon Zero Institute of Trinidad and Tobago</a> to learn more about this project and how you can get involved</p>
	
	<p> Date Last Updated: 16th July 2021</p>
	
	<p>CZITT CORE (c) Carbon Zero Institute of Trinidad and Tobago 2021</p>	
	
	`;

let panelContent={
	id: 'info',
	tab: "<img class='sidebar-tab-icon' src='logo_color.png'>",
	pane: info,
	title: "Information",
	position: "top"
};

sidebar.addPanel(panelContent);
		
sidebar.addPanel({
        id: 'ghlink',
        tab: '<img class ="sidebar-tab-icon" src="github_logo.png">',
        button: 'https://github.com/CZITTRegister/OnlineMapTraining',
        position: 'bottom'
});

		
		myMap.on("click", function(){sidebar.close()});
	
	
	
	
	

let treeData;

fetch("./treesdata_wgs84.geojson")
      .then(response=> {
        return response.json();
      })

.then(data => {
    return treeData = data;
    
})
.then(data => treeLayer.addData(data));
	</script>
	
	
                              
       </body>
            
            
</html>

       
